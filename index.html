<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ancient Nordic Reading Nook</title>
    <style>
        /* Base Reset */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            overflow: hidden; /* Prevents scrollbars from the floating motes */
            background-color: #000; /* Fallback color */
        }

        /* Background and Typography */
        .nook-background {
            width: 100vw;
            height: 100vh;
            background-size: cover;
            background-position: center;
            color: #eaddcf; /* Soft parchment color for text */
            font-family: 'Cinzel', serif, system-ui, sans-serif; /* A good fantasy-style font */
            position: relative;
        }

        .site-header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), rgba(0,0,0,0));
            text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
            position: relative;
            z-index: 10;
        }

        /* Collapsible UI Styling */
        .collapsible-ui {
            position: absolute;
            bottom: 40px;
            left: 40px;
            background: rgba(20, 15, 10, 0.85); /* Dark wood/stone color */
            border: 1px solid #5a4a3a;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.7);
            z-index: 10;
        }

        .ui-toggle {
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            list-style: none; /* Hides default arrow in some browsers */
            border-bottom: 1px solid transparent;
        }

        .ui-toggle::-webkit-details-marker {
            display: none; /* Hides default arrow in WebKit */
        }

        .collapsible-ui[open] .ui-toggle {
            border-bottom: 1px solid #5a4a3a;
        }

        .ui-menu-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            letter-spacing: 1px;
        }

        input[type="range"] {
            width: 100%;
            accent-color: #d4a373; /* Warm highlight for the sliders */
        }

        /* Motes Animation Styling */
        #motes-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Lets you click through them to the UI */
            overflow: hidden;
            z-index: 1; /* Keeps them behind the UI but over the background */
        }

        .mote {
            position: absolute;
            background-color: rgba(255, 230, 180, 0.6); /* Warm, glowing firelight color */
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(255, 230, 180, 0.4);
            opacity: 0;
            animation: drift linear infinite;
        }

        @keyframes drift {
            0% {
                transform: translateY(0) translateX(0) scale(0.8);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(50px) scale(1.2);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <div class="nook-background" style="background-image: url('garden_bg.png');">
        
        <div id="motes-container"></div>
        
        <header class="site-header">
            <h1>Ancient Nordic Reading Nook</h1>
        </header>

        <details class="collapsible-ui" open>
            <summary class="ui-toggle">Atmosphere Controls</summary>
            
            <div class="ui-menu-content">
                <div class="control-group">
                    <label for="fire-volume">Hearth Fire</label>
                    <input type="range" id="fire-volume" min="0" max="100" value="0">
                </div>
                
                <div class="control-group">
                    <label for="cat-volume">Cat Purring</label>
                    <input type="range" id="cat-volume" min="0" max="100" value="0">
                </div>
                
                <div class="control-group">
                    <label for="wind-volume">Distant Wind</label>
                    <input type="range" id="wind-volume" min="0" max="100" value="0">
                </div>
            </div>
        </details>

    </div>

    <audio id="fire-audio" src="fire-crackle.mp3" loop></audio>
    <audio id="cat-audio" src="cat-purr.mp3" loop></audio>
    <audio id="wind-audio" src="wind-howl.mp3" loop></audio>

    <script>
        // --- 1. Generate Dust Motes ---
        function createMotes() {
            const container = document.getElementById('motes-container');
            const moteCount = 40; // Adjust this number for more or less density

            for (let i = 0; i < moteCount; i++) {
                let mote = document.createElement('div');
                mote.classList.add('mote');

                // Randomize size, position, and animation speed
                let size = Math.random() * 4 + 2; 
                mote.style.width = `${size}px`;
                mote.style.height = `${size}px`;
                mote.style.left = `${Math.random() * 100}vw`;
                mote.style.top = `${Math.random() * 100}vh`;
                
                let duration = Math.random() * 10 + 10; // Between 10s and 20s
                let delay = Math.random() * 10;
                
                mote.style.animationDuration = `${duration}s`;
                mote.style.animationDelay = `${delay}s`;

                container.appendChild(mote);
            }
        }

        // --- 2. Link Audio to UI Sliders ---
        function setupAudioControls(sliderId, audioId) {
            const audio = document.getElementById(audioId);
            const slider = document.getElementById(sliderId);

            // Set initial volume based on slider's default value (0)
            audio.volume = slider.value / 100;

            slider.addEventListener('input', function() {
                // Play audio on first interaction if it's paused
                if (audio.paused) {
                    audio.play().catch(error => console.log("Audio play blocked by browser:", error));
                }
                // Convert slider value (0-100) to audio volume (0.0 to 1.0)
                audio.volume = this.value / 100;
            });
        }

        // --- 3. Initialize Everything on Load ---
        window.onload = () => {
            createMotes();
            setupAudioControls('fire-volume', 'fire-audio');
            setupAudioControls('cat-volume', 'cat-audio');
            setupAudioControls('wind-volume', 'wind-audio');
        };
    </script>
</body>
</html>
