<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moon's Kitchen - The Hearth</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
<style>
    :root {
        --glass-bg: rgba(15, 10, 8, 0.45);
        --glass-border: rgba(212, 175, 55, 0.3);
        --gold: #d4af37;
        --gold-glow: rgba(212, 175, 55, 0.6);
        --text-main: #fdf5e6;
        --text-muted: #bdae93;
        --parchment: rgba(227, 213, 184, 0.95);
        --ink: #2c1810;
        --fire-orange: #ff6a00;
    }

    body, html {
        margin: 0; padding: 0; width: 100%; height: 100%;
        font-family: 'Montserrat', sans-serif;
        color: var(--text-main);
        overflow: hidden; 
        background-color: #000;
        cursor: crosshair; 
    }

    /* --- The Living Background --- */
    .bg-layer {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: url('image_5.png') no-repeat center center;
        background-size: cover;
        z-index: 0;
        animation: flicker 8s infinite alternate ease-in-out;
    }

    @keyframes flicker {
        0%, 100% { filter: brightness(0.9) contrast(1.05); transform: scale(1); }
        50% { filter: brightness(1) contrast(1.1); transform: scale(1.01); }
    }

    .vignette {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle at center, transparent 20%, rgba(0,0,0,0.85) 100%);
        z-index: 1; pointer-events: none;
    }

    /* --- Floating Embers & Potions --- */
    #particle-container { position: absolute; width: 100%; height: 100%; z-index: 2; pointer-events: none; }
    .ember {
        position: absolute; bottom: -20px; background: var(--fire-orange); border-radius: 50%;
        box-shadow: 0 0 10px var(--fire-orange), 0 0 20px #ffcc00; opacity: 0;
        animation: rise linear infinite;
    }
    @keyframes rise {
        0% { opacity: 0; transform: translateY(0) scale(1) translateX(0); }
        20% { opacity: 0.8; }
        80% { opacity: 0.5; }
        100% { opacity: 0; transform: translateY(-100vh) scale(0.5) translateX(var(--drift)); }
    }

    .potion-glow {
        position: absolute; width: 30px; height: 40px; border-radius: 50%;
        filter: blur(15px); opacity: 0.6; animation: pulse 4s infinite alternate; z-index: 1;
    }
    .potion-1 { top: 40%; right: 12%; background: #00f7ff; } 
    .potion-2 { top: 40%; right: 6%; background: #ff00e6; } 
    .potion-3 { top: 58%; right: 6%; background: #ffaa00; } 

    @keyframes pulse {
        0% { opacity: 0.3; transform: scale(1); }
        100% { opacity: 0.8; transform: scale(1.3); }
    }

    /* --- UI Layer & Glassmorphism --- */
    .ui-layer {
        position: relative; z-index: 10; width: 100%; height: 100%;
        display: flex; justify-content: space-between; padding: 40px; box-sizing: border-box; pointer-events: none;
    }

    /* Make child elements clickable again */
    .ignite-btn, .menu-sidebar { pointer-events: auto; }

    /* --- The Epic Ignite Button --- */
    .ignite-btn {
        position: absolute; bottom: 40px; left: 40px; z-index: 50;
        background: rgba(20, 15, 10, 0.4); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
        border: 1px solid var(--glass-border); color: var(--gold);
        padding: 12px 28px; font-family: 'Cinzel', serif; font-size: 1.1rem; letter-spacing: 2px;
        border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 12px;
        transition: all 0.4s ease; box-shadow: 0 10px 30px rgba(0,0,0,0.8), inset 0 0 10px rgba(212, 175, 55, 0.1);
        text-transform: uppercase;
    }
    .ignite-btn:hover {
        background: rgba(212, 175, 55, 0.15); border-color: var(--gold);
        box-shadow: 0 10px 30px rgba(0,0,0,0.8), 0 0 20px var(--gold-glow); color: #fff; transform: translateY(-2px);
    }
    .ignite-btn.active {
        border-color: var(--fire-orange); color: #ffaa00;
        box-shadow: 0 10px 30px rgba(0,0,0,0.8), 0 0 25px rgba(255, 106, 0, 0.5), inset 0 0 15px rgba(255, 106, 0, 0.2);
    }
    .icon-fire { font-size: 1.4rem; filter: drop-shadow(0 0 5px currentColor); }

    /* --- The Grimoire Sidebar --- */
    .menu-sidebar {
        background: var(--glass-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border); border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.8), inset 0 0 20px rgba(255,255,255,0.05);
        width: 400px; height: 100%; padding: 30px; display: flex; flex-direction: column;
        position: absolute; right: 40px; top: 0; bottom: 0; margin: auto; max-height: 85vh;
    }

    .menu-header { text-align: center; margin-bottom: 20px; border-bottom: 1px solid var(--glass-border); padding-bottom: 20px; }
    .menu-header h1 { font-family: 'Cinzel', serif; font-size: 2.5rem; margin: 0; letter-spacing: 4px; text-shadow: 0 0 15px rgba(212,175,55,0.4); }
    .menu-header p { font-family: 'Cinzel', serif; color: var(--gold); font-size: 0.9rem; letter-spacing: 3px; margin: 5px 0 0 0; text-transform: uppercase; }

    .recipe-list { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
    .recipe-list::-webkit-scrollbar { width: 4px; }
    .recipe-list::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); border-radius: 4px; }
    .recipe-list::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 4px; }

    .recipe-item {
        margin-bottom: 20px; padding: 15px; border: 1px solid transparent;
        border-left: 2px solid var(--glass-border); transition: 0.3s; cursor: pointer;
        background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, transparent 100%);
    }
    .recipe-item:hover {
        border-left: 3px solid var(--gold); border-color: rgba(212,175,55,0.2);
        transform: translateX(8px); background: rgba(212,175,55,0.05);
    }
    .recipe-item h4 { font-family: 'Cinzel', serif; font-size: 1.3rem; margin: 0; color: var(--text-main); transition: 0.3s; }
    .recipe-item:hover h4 { color: var(--gold); text-shadow: 0 0 10px var(--gold-glow); }
    .recipe-item p { font-size: 0.85rem; color: var(--text-muted); margin: 8px 0 0 0; line-height: 1.5; }
    .meta { display: flex; gap: 15px; margin-top: 10px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: var(--gold); }

    /* --- The Spell Overlay (Modal) --- */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: auto;
        background: rgba(0,0,0,0.8); backdrop-filter: blur(10px);
        z-index: 100; display: none; justify-content: center; align-items: center;
        opacity: 0; transition: opacity 0.4s ease;
    }
    .modal-content {
        background: var(--parchment); color: var(--ink);
        width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto;
        padding: 50px; border-radius: 4px 20px 4px 20px;
        box-shadow: 0 0 50px rgba(0,0,0,1), inset 0 0 30px rgba(139, 69, 19, 0.2);
        border: 2px solid #8b5a2b; position: relative;
        transform: scale(0.95) translateY(20px); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .modal-overlay.show { display: flex; opacity: 1; }
    .modal-overlay.show .modal-content { transform: scale(1) translateY(0); }

    .close-btn {
        position: absolute; top: 20px; right: 30px; font-family: 'Cinzel', serif;
        font-size: 2rem; color: var(--ink); cursor: pointer; transition: 0.2s;
    }
    .close-btn:hover { color: #8a3324; transform: rotate(90deg); }

    .modal-title { font-family: 'Cinzel', serif; font-size: 2.5rem; margin: 0 0 10px 0; text-align: center; border-bottom: 2px solid var(--ink); padding-bottom: 10px; }
    .modal-desc { font-style: italic; text-align: center; margin-bottom: 30px; font-size: 1.1rem; }
    .recipe-section { margin-bottom: 25px; }
    .recipe-section h3 { font-family: 'Cinzel', serif; font-size: 1.4rem; color: #8a3324; margin-bottom: 10px; }
    .recipe-section ul, .recipe-section ol { padding-left: 20px; line-height: 1.8; }
    .modal-content::-webkit-scrollbar { width: 6px; }
    .modal-content::-webkit-scrollbar-track { background: transparent; }
    .modal-content::-webkit-scrollbar-thumb { background: #8b5a2b; border-radius: 4px; }
</style>
</head>
<body>

    <audio id="hearth-audio" loop>
        <source src="fire.mp3" type="audio/mpeg">
    </audio>

    <div class="bg-layer"></div>
    <div class="vignette"></div>
    <div id="particle-container"></div>
    
    <div class="potion-glow potion-1"></div>
    <div class="potion-glow potion-2"></div>
    <div class="potion-glow potion-3"></div>

    <div class="ui-layer">
        
        <div id="magic-btn" class="ignite-btn">
            <span class="icon-fire">ðŸ”¥</span>
            <span id="btn-text">Ignite Hearth</span>
        </div>

        <div class="menu-sidebar">
            <div class="menu-header">
                <h1>Moon's Kitchen</h1>
                <p>âœ¦ Provisions & Potions âœ¦</p>
            </div>

            <div class="recipe-list">
                <div class="recipe-item" onclick="openSpell('potato')">
                    <h4>Winter-Breaker Potato Soup</h4>
                    <p>A thick, restorative root soup. Perfect for surviving prolonged power outages and bitter ice storms.</p>
                    <div class="meta"><span>âœ¦ Cauldron</span><span>HP: +50</span></div>
                </div>

                <div class="recipe-item" onclick="openSpell('lemon')">
                    <h4>Scholar's Lemon-Brambleberry Loaf</h4>
                    <p>A bright, sweet bread infused with fresh citrus. Grants temporary mental clarity, ideal for guiding young apprentices through their daily studies.</p>
                    <div class="meta"><span>âœ¦ Baking</span><span>Focus: +20</span></div>
                </div>

                <div class="recipe-item" onclick="openSpell('pies')">
                    <h4>Iron-Skillet Fried Pies</h4>
                    <p>Crispy, golden, hand-held pastries. The perfect quick provision between long shifts or guild quests.</p>
                    <div class="meta"><span>âœ¦ Skillet</span><span>Stamina: +35</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="spell-modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeSpell()">Ã—</span>
            <h2 class="modal-title" id="modal-title">Spell Name</h2>
            <p class="modal-desc" id="modal-desc">Flavor text goes here.</p>
            
            <div class="recipe-section">
                <h3>Required Reagents</h3>
                <ul id="modal-ingredients"></ul>
            </div>
            
            <div class="recipe-section">
                <h3>Incantation</h3>
                <ol id="modal-instructions"></ol>
            </div>
        </div>
    </div>

    <script>
        // --- Embers Generator ---
        const particleContainer = document.getElementById('particle-container');
        for(let i=0; i<40; i++) {
            let ember = document.createElement('div');
            ember.className = 'ember';
            ember.style.left = Math.random() * 100 + '%';
            let size = (Math.random() * 4 + 2) + 'px';
            ember.style.width = size; ember.style.height = size;
            ember.style.animationDuration = (Math.random() * 5 + 4) + 's';
            ember.style.animationDelay = (Math.random() * 5) + 's';
            let drift = (Math.random() - 0.5) * 80 + 'px';
            ember.style.setProperty('--drift', drift);
            particleContainer.appendChild(ember);
        }

        // --- Audio Control ---
        const magicBtn = document.getElementById('magic-btn');
        const btnText = document.getElementById('btn-text');
        const audio = document.getElementById('hearth-audio');
        audio.volume = 0.5; 
        let isPlaying = false;

        magicBtn.addEventListener('click', () => {
            if (!isPlaying) {
                audio.play();
                btnText.innerText = 'Extinguish Hearth';
                magicBtn.classList.add('active');
            } else {
                audio.pause();
                btnText.innerText = 'Ignite Hearth';
                magicBtn.classList.remove('active');
            }
            isPlaying = !isPlaying;
        });

        // --- Grimoire Data Engine ---
        const grimoireData = {
            'potato': {
                title: 'Winter-Breaker Potato Soup',
                desc: 'A thick, restorative root soup. Perfect for surviving prolonged power outages and bitter ice storms.',
                ingredients: [
                    '6 large russet potatoes, peeled and diced',
                    '1 yellow onion, finely chopped',
                    '4 cups chicken or vegetable broth',
                    '1 cup heavy cream',
                    'Salt, pepper, and a pinch of dried thyme'
                ],
                instructions: [
                    'Melt butter in a heavy cauldron (or large pot) over the fire.',
                    'SautÃ© the onion until translucent and fragrant.',
                    'Add the diced potatoes and broth. Bring to a boil, then simmer until potatoes are tender.',
                    'Mash roughly half the potatoes in the pot to thicken the base.',
                    'Stir in the heavy cream and seasonings. Simmer on low heat for 10 more minutes before serving.'
                ]
            },
            'lemon': {
                title: "Scholar's Lemon-Brambleberry Loaf",
                desc: 'A bright, sweet bread infused with fresh citrus. Grants temporary mental clarity, ideal for guiding young apprentices through their daily studies.',
                ingredients: [
                    '1.5 cups all-purpose flour',
                    '1 cup fresh blueberries',
                    '1 cup granulated sugar',
                    'Zest and juice of 1 large lemon',
                    '1/2 cup butter, softened'
                ],
                instructions: [
                    'Preheat your oven (or brick hearth) to 350 degrees.',
                    'Cream together the butter and sugar until light and fluffy. Beat in the eggs, lemon juice, and zest.',
                    'Gently fold in the flour and baking powder until just combined.',
                    'Toss the blueberries in a pinch of flour, then fold them into the batter.',
                    'Bake in a greased loaf pan for 55-60 minutes until golden on top.'
                ]
            },
            'pies': {
                title: 'Iron-Skillet Fried Pies',
                desc: 'Crispy, golden, hand-held pastries. The perfect quick provision between long shifts or guild quests.',
                ingredients: [
                    '2 cups dried apples or peaches, rehydrated and spiced',
                    'Homemade or store-bought pie crust dough',
                    '1/2 cup sugar mixed with cinnamon',
                    'Lard or cooking oil for the skillet'
                ],
                instructions: [
                    'Roll out the dough on a floured wooden board and cut into 6-inch circles.',
                    'Place a heaping spoonful of the spiced fruit mixture onto one half of the circle.',
                    'Fold the dough over the filling to create a half-moon. Crimp the edges tightly with a fork.',
                    'Heat a heavy iron skillet with a shallow layer of oil.',
                    'Fry the pies until golden brown on both sides. Drain and sprinkle with cinnamon sugar.'
                ]
            }
        };

        // --- Modal Logic ---
        const modal = document.getElementById('spell-modal');
        const mTitle = document.getElementById('modal-title');
        const mDesc = document.getElementById('modal-desc');
        const mIngredients = document.getElementById('modal-ingredients');
        const mInstructions = document.getElementById('modal-instructions');

        function openSpell(spellId) {
            const spell = grimoireData[spellId];
            mTitle.innerText = spell.title; mDesc.innerText = spell.desc;
            mIngredients.innerHTML = ''; spell.ingredients.forEach(ing => mIngredients.innerHTML += `<li>${ing}</li>`);
            mInstructions.innerHTML = ''; spell.instructions.forEach(inst => mInstructions.innerHTML += `<li>${inst}</li>`);
            modal.classList.add('show');
        }

        function closeSpell() { modal.classList.remove('show'); }
        window.onclick = function(event) { if (event.target == modal) { closeSpell(); } }
    </script>
</body>
</html>
