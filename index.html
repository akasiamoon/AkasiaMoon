<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moon's Kitchen - The Living Hearth</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
<style>
    :root {
        --glass-bg: rgba(15, 10, 8, 0.45);
        --glass-border: rgba(212, 175, 55, 0.3);
        --gold: #d4af37;
        --gold-glow: rgba(212, 175, 55, 0.6);
        --text-main: #fdf5e6;
        --text-muted: #bdae93;
        --parchment: rgba(227, 213, 184, 0.95);
        --ink: #2c1810;
        --fire-orange: #ff6a00;
    }

    body, html {
        margin: 0; padding: 0; width: 100%; height: 100%;
        font-family: 'Montserrat', sans-serif;
        color: var(--text-main);
        overflow: hidden; 
        background-color: #000;
        cursor: crosshair; 
    }

    /* --- The Living Background --- */
    .bg-layer {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: url('image_5.png') no-repeat center center;
        background-size: cover;
        z-index: 0;
        animation: breathe 10s infinite alternate ease-in-out;
    }

    @keyframes breathe {
        0% { filter: brightness(0.85) contrast(1.1); transform: scale(1); }
        100% { filter: brightness(1) contrast(1.15); transform: scale(1.02); }
    }

    .vignette {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle at center, transparent 20%, rgba(0,0,0,0.85) 100%);
        z-index: 1; pointer-events: none;
    }

    /* --- THE REAL FIREPLACE (YouTube Overlay) --- */
    .hearth-container {
        position: absolute;
        top: 45%; /* Adjusted for image_5.png hearth location */
        left: 21%;
        width: 300px; /* Size of the fireplace opening */
        height: 200px;
        z-index: 2;
        overflow: hidden;
        border-radius: 50% 50% 10px 10px; /* Arched to match the stone */
        filter: blur(2px) contrast(1.2) brightness(1.2);
        box-shadow: 0 0 40px var(--fire-orange);
        pointer-events: none;
        opacity: 0;
        transition: opacity 2s ease;
    }

    .hearth-container.ignited { opacity: 1; }

    .hearth-container iframe {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        pointer-events: none;
    }

    /* --- Floating Embers & Potions --- */
    #particle-container { position: absolute; width: 100%; height: 100%; z-index: 3; pointer-events: none; }
    .ember {
        position: absolute; bottom: -20px; background: var(--fire-orange); border-radius: 50%;
        box-shadow: 0 0 10px var(--fire-orange), 0 0 20px #ffcc00; opacity: 0;
        animation: rise linear infinite;
    }
    @keyframes rise {
        0% { opacity: 0; transform: translateY(0) scale(1) translateX(0); }
        20% { opacity: 0.8; }
        80% { opacity: 0.5; }
        100% { opacity: 0; transform: translateY(-100vh) scale(0.5) translateX(var(--drift)); }
    }

    /* --- UI Layer --- */
    .ui-layer {
        position: relative; z-index: 10; width: 100%; height: 100%;
        display: flex; justify-content: space-between; padding: 40px; box-sizing: border-box; pointer-events: none;
    }

    .ignite-btn, .menu-sidebar { pointer-events: auto; }

    .ignite-btn {
        position: absolute; bottom: 40px; left: 40px; z-index: 50;
        background: rgba(20, 15, 10, 0.4); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
        border: 1px solid var(--glass-border); color: var(--gold);
        padding: 12px 28px; font-family: 'Cinzel', serif; font-size: 1.1rem; letter-spacing: 2px;
        border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 12px;
        transition: all 0.4s ease; box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        text-transform: uppercase;
    }
    .ignite-btn.active { border-color: var(--fire-orange); color: #ffaa00; box-shadow: 0 0 25px rgba(255, 106, 0, 0.5); }

    /* --- Grimoire Sidebar --- */
    .menu-sidebar {
        background: var(--glass-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border); border-radius: 12px;
        width: 400px; height: 100%; padding: 30px; display: flex; flex-direction: column;
        position: absolute; right: 40px; top: 0; bottom: 0; margin: auto; max-height: 85vh;
    }

    .menu-header { text-align: center; margin-bottom: 20px; border-bottom: 1px solid var(--glass-border); padding-bottom: 20px; }
    .menu-header h1 { font-family: 'Cinzel', serif; font-size: 2.5rem; margin: 0; letter-spacing: 4px; }

    .recipe-list { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
    .recipe-item {
        margin-bottom: 20px; padding: 15px; border-left: 2px solid var(--glass-border); cursor: pointer;
        transition: 0.3s; background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, transparent 100%);
    }
    .recipe-item:hover { border-left: 3px solid var(--gold); transform: translateX(8px); background: rgba(212,175,55,0.05); }

    /* --- Spell Overlay --- */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: auto;
        background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 100; display: none; justify-content: center; align-items: center;
        opacity: 0; transition: opacity 0.4s ease;
    }
    .modal-content {
        background: var(--parchment); color: var(--ink); width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto;
        padding: 50px; border-radius: 4px 20px 4px 20px; border: 2px solid #8b5a2b; position: relative;
    }
    .modal-overlay.show { display: flex; opacity: 1; }
</style>
</head>
<body>

    <div class="bg-layer"></div>
    <div class="vignette"></div>

    <div class="hearth-container" id="hearth-fire">
        <div id="player"></div>
    </div>

    <div id="particle-container"></div>
    
    <div class="ui-layer">
        <div id="magic-btn" class="ignite-btn">
            <span class="icon-fire">ðŸ”¥</span>
            <span id="btn-text">Ignite Hearth</span>
        </div>

        <div class="menu-sidebar">
            <div class="menu-header">
                <h1>Moon's Kitchen</h1>
                <p>âœ¦ Provisions & Magic âœ¦</p>
            </div>
            <div class="recipe-list">
                <div class="recipe-item" onclick="openSpell('potato')">
                    <h4>Winter-Breaker Potato Soup</h4>
                    <p>A thick, restorative root soup crafted for long nights and winter storms.</p>
                </div>
                <div class="recipe-item" onclick="openSpell('lemon')">
                    <h4>Scholar's Lemon-Berry Loaf</h4>
                    <p>A bright bread for mental clarity during intense study sessions.</p>
                </div>
                <div class="recipe-item" onclick="openSpell('pies')">
                    <h4>Iron-Skillet Provisions</h4>
                    <p>Crispy hand-pies designed for those in the gig economy or on long quests.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="spell-modal">
        <div class="modal-content">
            <span style="position:absolute; top:20px; right:30px; cursor:pointer; font-size:2rem;" onclick="closeSpell()">Ã—</span>
            <h2 id="modal-title" style="font-family:'Cinzel'; text-align:center;"></h2>
            <p id="modal-desc" style="font-style:italic; text-align:center;"></p>
            <div id="modal-body" style="line-height:1.8;"></div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: 'cdKop6aixVE',
                playerVars: {
                    'autoplay': 0,
                    'controls': 0,
                    'loop': 1,
                    'playlist': 'cdKop6aixVE',
                    'modestbranding': 1,
                    'mute': 0
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // Player is ready, but we wait for Ignite click
        }

        // --- Ignite Control ---
        const magicBtn = document.getElementById('magic-btn');
        const btnText = document.getElementById('btn-text');
        const fireContainer = document.getElementById('hearth-fire');
        let isIgnited = false;

        magicBtn.addEventListener('click', () => {
            if (!isIgnited) {
                player.playVideo();
                fireContainer.classList.add('ignited');
                btnText.innerText = 'Extinguish Hearth';
                magicBtn.classList.add('active');
            } else {
                player.pauseVideo();
                fireContainer.classList.remove('ignited');
                btnText.innerText = 'Ignite Hearth';
                magicBtn.classList.remove('active');
            }
            isIgnited = !isIgnited;
        });

        // --- Embers Generator ---
        const particleContainer = document.getElementById('particle-container');
        for(let i=0; i<30; i++) {
            let ember = document.createElement('div');
            ember.className = 'ember';
            ember.style.left = Math.random() * 100 + '%';
            let size = (Math.random() * 3 + 2) + 'px';
            ember.style.width = size; ember.style.height = size;
            ember.style.animationDuration = (Math.random() * 5 + 4) + 's';
            ember.style.animationDelay = (Math.random() * 5) + 's';
            let drift = (Math.random() - 0.5) * 80 + 'px';
            ember.style.setProperty('--drift', drift);
            particleContainer.appendChild(ember);
        }

        // --- Grimoire Logic ---
        const grimoireData = {
            'potato': { title: 'Winter-Breaker Potato Soup', desc: 'Crafted for times of outage and ice.', body: '<h3>Reagents</h3><ul><li>6 Potatoes</li><li>1 Onion</li><li>4c Broth</li></ul><h3>Incantation</h3><p>Simmer in the cauldron until tender.</p>' },
            'lemon': { title: "Scholar's Lemon-Berry Loaf", desc: 'Mental focus for the homeschool apprentice.', body: '<h3>Reagents</h3><ul><li>1.5c Flour</li><li>Lemon Zest</li><li>Blueberries</li></ul>' },
            'pies': { title: 'Iron-Skillet Provisions', desc: 'Portable energy for dashers and wanderers.', body: '<h3>Reagents</h3><ul><li>Fruit Filling</li><li>Pie Crust</li><li>Lard</li></ul>' }
        };

        const modal = document.getElementById('spell-modal');
        function openSpell(id) {
            const s = grimoireData[id];
            document.getElementById('modal-title').innerText = s.title;
            document.getElementById('modal-desc').innerText = s.desc;
            document.getElementById('modal-body').innerHTML = s.body;
            modal.classList.add('show');
        }
        function closeSpell() { modal.classList.remove('show'); }
    </script>
</body>
</html>
